{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}EMIS - Education Management Information System{% endblock %}</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f5f7ff',
                            100: '#ebf0ff',
                            200: '#d6e0ff',
                            300: '#b8c9ff',
                            400: '#94a9ff',
                            500: '#667eea',
                            600: '#5568d3',
                            700: '#4555b8',
                            800: '#37449c',
                            900: '#2c3780',
                        },
                        secondary: {
                            50: '#f9f5ff',
                            100: '#f3ebff',
                            200: '#e7d6ff',
                            300: '#d6b8ff',
                            400: '#c094ff',
                            500: '#764ba2',
                            600: '#653a8b',
                            700: '#552f74',
                            800: '#45265d',
                            900: '#371e4a',
                        },
                    }
                }
            }
        }
    </script>
    
    <style>
        :root {
            --sidebar-width: 260px;
            --header-height: 65px;
        }
        
        /* Sidebar Styles */
        .sidebar {
            position: fixed;
            top: var(--header-height);
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - var(--header-height));
            overflow-y: auto;
            @apply bg-white shadow-lg z-[1000] transition-transform duration-300;
        }
        
        .sidebar::-webkit-scrollbar {
            width: 6px;
        }
        
        .sidebar::-webkit-scrollbar-track {
            @apply bg-gray-100;
        }
        
        .sidebar::-webkit-scrollbar-thumb {
            @apply bg-gray-300 rounded;
        }
        
        .sidebar::-webkit-scrollbar-thumb:hover {
            @apply bg-gray-400;
        }
        
        /* Main Content */
        .main-content {
            margin-top: var(--header-height);
            min-height: calc(100vh - var(--header-height));
            @apply p-8 transition-all duration-300;
        }
        
        .main-content.with-sidebar {
            margin-left: var(--sidebar-width);
        }
        
        .main-content.no-sidebar {
            @apply ml-0;
        }
        
        /* Navbar */
        .navbar {
            height: var(--header-height);
            @apply fixed top-0 left-0 right-0 shadow-md z-[1050];
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        }
        
        /* List Group Items */
        .list-group-item {
            @apply border-none border-l-4 border-transparent transition-all duration-300
                   py-3.5 px-5 mb-1 font-medium text-gray-600 cursor-pointer;
        }
        
        .list-group-item i {
            @apply w-5 mr-3 text-gray-500 inline-block;
        }
        
        .list-group-item:hover {
            @apply bg-gradient-to-r from-gray-50 to-gray-100 border-l-primary-500
                   transform translate-x-1 text-primary-500;
        }
        
        .list-group-item:hover i {
            @apply text-primary-500;
        }
        
        .list-group-item.active {
            @apply bg-gradient-to-r from-blue-50 to-blue-100 border-l-primary-500
                   text-primary-500 font-semibold transform translate-x-1;
        }
        
        .list-group-item.active i {
            @apply text-primary-500;
        }
        
        /* Module Grid */
        .modules-grid {
            @apply grid gap-6;
            grid-template-columns: repeat(3, 1fr);
        }
        
        @media (max-width: 1200px) {
            .modules-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .main-content.with-sidebar {
                @apply ml-0;
            }
            
            .main-content {
                @apply p-4;
            }
            
            .modules-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
    
    {% block extra_css %}{% endblock %}
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100 text-gray-800">
    {% if user.is_authenticated %}
        {% include 'core/includes/header.html' %}
        {% block sidebar %}{% endblock %}
    {% endif %}
    
    <main class="{% if user.is_authenticated %}main-content {% block main_class %}no-sidebar{% endblock %}{% else %}{% endif %}">
        {% if messages %}
            <div class="container-fluid">
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} rounded-xl border-none shadow-sm px-5 py-4 mb-4 flex items-center justify-between" role="alert">
                        <span>{{ message }}</span>
                        <button type="button" class="btn-close ml-4" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
        
        {% block content %}{% endblock %}
    </main>
    
    {% if user.is_authenticated %}
        {% include 'core/includes/footer.html' %}
    {% endif %}
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    
    <script>
        // Mobile sidebar toggle
        document.addEventListener('DOMContentLoaded', function() {
            const sidebarToggle = document.getElementById('sidebarToggle');
            const sidebar = document.getElementById('sidebar');
            
            if (sidebarToggle && sidebar) {
                sidebarToggle.addEventListener('click', function() {
                    sidebar.classList.toggle('show');
                });
            }
        });
    </script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>
