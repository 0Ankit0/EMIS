{% extends 'base_module.html' %}
{% load static %}

{% block title %}{{ gallery.title }} - CMS{% endblock %}

{% block module_sidebar %}
    {% include 'cms/sidebar.html' %}
{% endblock %}

{% block module_content %}
<div class="max-w-7xl mx-auto">
    <div class="mb-6 flex justify-between items-start">
        <div><h1 class="text-3xl font-bold text-gray-800 mb-2">{{ gallery.title }}</h1></div>
        <div class="flex gap-2">
            <a href="{% url 'cms:gallery_update' gallery.pk %}" class="btn btn-primary"><i class="fas fa-edit mr-2"></i>Edit</a>
            <form method="post" action="{% url 'cms:gallery_delete' gallery.pk %}" onsubmit="return confirm('Delete?');"> {% csrf_token %}<button type="submit" class="btn btn-danger"><i class="fas fa-trash mr-2"></i>Delete</button></form>
        </div>
    </div>

    <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
        <p class="text-gray-700">{{ gallery.description|linebreaks }}</p>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
        {% for image in gallery.images.all %}
        <div class="bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-lg transition-shadow">
            <img src="{{ image.image.url }}" alt="{{ image.title }}" class="w-full h-48 object-cover">
            {% if image.caption %}<div class="p-3"><p class="text-sm text-gray-600">{{ image.caption }}</p></div>{% endif %}
        </div>
        {% empty %}
        <div class="col-span-full bg-blue-50 p-6 rounded text-center"><i class="fas fa-images text-4xl text-blue-300 mb-3"></i><p class="text-blue-600">No images in this gallery yet</p></div>
        {% endfor %}
    </div>

    <div class="mt-6"><a href="{% url 'cms:gallery_list' %}" class="btn btn-outline-secondary"><i class="fas fa-arrow-left mr-2"></i>Back to Galleries</a></div>
</div>
{% endblock %}
